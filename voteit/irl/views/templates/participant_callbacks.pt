<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="load: ${api.template_dir}content.pt"
         xmlns:i18n="http://xml.zope.org/namespaces/i18n"
         i18n:domain="voteit.irl">
<body>
<div metal:fill-slot="full_window" id="content">

    <tal:messages replace="structure api.render_single_view_component(context, request, 'main', 'flash_messages')">Messages</tal:messages>
    <div class="clear"><!-- --></div>
    
    <h1 id="page_heading" i18n:translate="">
        Participant callbacks
    </h1>
    
    <p i18n:translate="callback_code_explanation">
        This is an advanced feature that attaches callback code to an
        event that fires when a user claims a participant number.
        Don't touch this unless you know what you're doing.
    </p>

    <tal:callbacks repeat="adapter callback_adapters">

        <div id="${adapter.name + '-toggle-area'}" class="toggle_area toggle_opened">

        <h3><a class="toggle_minimize" tal:content="adapter.title">Title</a></h3>
        <div class="minimizable_area">
        <table class="listing">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Claimed by</th>
                </tr>
            </thead>
            <tbody>
                <tal:iterate repeat="number [n for (n, callbacks) in participant_callbacks.callbacks.items() if adapter.name in callbacks]">
                <tr>
                    <td>${number}</td>
                    <td tal:content="participant_numbers.number_to_userid.get(number, '')"></td>
                </tr>
                </tal:iterate>
            </tbody>
        </table>
        
        <br/>
        <form method="POST">
            <label for="start_number" i18n:translate="">Start</label>
            <input type="text" id="start_number" name="start" size="2" />
            <label for="end_number" i18n:translate="">End</label>
            <input type="text" id="end_number" name="end" size="2" />
            <input type="hidden" name="callback" value="${adapter.name}" />
            <button name="add" type="submit" value="add">
                <span i18n:translate="">Add</span>
            </button>
            <button name="remove" type="submit" value="remove">
                <span i18n:translate="">Remove</span>
            </button>
            <button name="back" type="submit" value="back">
                <span i18n:translate="">Back</span>
            </button>
        </form>
        </div><!-- Minimizable area -->
        </div>

    </tal:callbacks>

</div>
</body>
</html>
